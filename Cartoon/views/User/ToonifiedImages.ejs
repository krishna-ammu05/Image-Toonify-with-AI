<% layout('User/user_Boilerplate') -%>

<div class="container mt-5">
  <h1 class="mb-5 text-center fw-bold">ðŸŽ¨ My Toonified Images</h1>

  <% if (images && images.length > 0) { %>
  <div class="row g-5">
    <% images.forEach(img => { %>
    <!-- Changed col-lg-3 -> col-lg-4 for bigger cards -->
    <div class="col-12 col-sm-6 col-md-6 col-lg-4">
      <div class="card shadow-lg border-0 rounded-4 h-100">
        <!-- Image comparison row -->
        <div class="row g-0 position-relative" style="min-height: 280px">
          <!-- Original -->
          <div class="col-6 position-relative">
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Cat_November_2010-1a.jpg/960px-Cat_November_2010-1a.jpg"
              class="img-fluid h-100 object-fit-cover rounded-start"
              alt="Original Image"
            />
            <span
              class="badge bg-secondary bg-opacity-75 text-dark position-absolute top-0 start-0 m-2"
            >
              Original
            </span>
          </div>

          <!-- Toonified -->
          <div class="col-6 position-relative">
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Cat_November_2010-1a.jpg/960px-Cat_November_2010-1a.jpg"
              class="img-fluid h-100 object-fit-cover rounded-end"
              alt="Toonified Image"
            />
            <span
              class="badge bg-info bg-opacity-75 text-dark position-absolute top-0 end-0 m-2"
            >
              Toonified
            </span>
          </div>
        </div>

        <!-- Card body -->
        <div class="card-body text-center">
          <h5 class="card-title fw-semibold text-truncate"><%= img.name %></h5>
          <p class="text-muted small mb-3">
            Converted on: <%= new Date(img.convertedAt).toLocaleDateString() %>
          </p>
          <div class="d-flex justify-content-center gap-2">
            <a
              href="<%= img.cartoonImage %>"
              target="_blank"
              class="btn btn-sm btn-outline-primary px-3"
            >
              <i class="bi bi-eye"></i> View
            </a>
            <form
              action="/images/delete/<%= img.id %>"
              method="POST"
              onsubmit="return confirm('Are you sure you want to delete this image?');"
            >
              <button type="submit" class="btn btn-sm btn-outline-danger px-3">
                <i class="bi bi-trash"></i> Delete
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <% }) %>
  </div>
  <% } else { %>
  <div class="alert alert-info text-center">
    You havenâ€™t converted any images yet. Start creating some fun toonified
    images!
  </div>
  <% } %>
</div>
