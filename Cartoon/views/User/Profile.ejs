<% layout('User/user_Boilerplate') -%>

<div class="container mx-auto p-6">
  <h1 class="text-3xl font-bold mb-6">ðŸ‘¤ My Profile</h1>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <!-- Left Column: Profile & Account Settings -->
    <div class="space-y-6">
      <!-- Profile Card -->
      <div class="bg-white shadow-lg rounded-lg p-6 text-center">
        <img src="<%= user.avatar || '/images/default-avatar.png' %>" alt="Profile Picture" class="w-24 h-24 rounded-full mx-auto mb-4">
        <h2 class="text-xl font-semibold"><%= user.name %></h2>
        <p class="text-gray-500"><%= user.email %></p>
        <% if(user.phone){ %>
        <p class="text-gray-500"><%= user.phone %></p>
        <% } %>
      </div>

      <!-- Account Settings -->
      <div class="bg-white shadow-lg rounded-lg p-6">
        <h3 class="text-lg font-semibold mb-4">Account Settings</h3>
        <a href="/profile/edit" class="block w-full bg-blue-500 text-white py-2 px-4 rounded mb-2 text-center hover:bg-blue-600">Change Name / Email</a>
        <!-- <a href="/profile/avatar" class="block w-full bg-blue-500 text-white py-2 px-4 rounded mb-2 text-center hover:bg-blue-600">Change Profile Picture</a> -->
        <a href="/profile/password" class="block w-full bg-blue-500 text-white py-2 px-4 rounded mb-2 text-center hover:bg-blue-600">Change Password</a>
        <a href="/profile/linked-accounts" class="block w-full bg-gray-200 text-gray-800 py-2 px-4 rounded text-center hover:bg-gray-300">Linked Accounts</a>
      </div>

      <!-- Danger Zone -->
      <div class="bg-red-100 shadow-lg rounded-lg p-6">
        <h3 class="text-lg font-semibold mb-4 text-red-700">Danger Zone</h3>
        <form action="/profile/reset" method="POST">
          <button type="submit" class="w-full bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600 mb-2">Reset All Data</button>
        </form>
        <form action="/profile/delete" method="POST">
          <button type="submit" class="w-full bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600">Delete Account</button>
        </form>
      </div>
    </div>

    <!-- Right Column: Subscription, Usage, Security, Personalization, Activity -->
    <div class="md:col-span-2 space-y-6">
      <!-- Subscription & Plan -->
      <div class="bg-white shadow-lg rounded-lg p-6">
        <h3 class="text-lg font-semibold mb-4">Subscription & Plan</h3>
        <p>Current Plan: <strong><%= user.plan %></strong></p>
        <p>Status: <strong><%= user.subscriptionStatus %></strong></p>
        <p>Renewal Date: <strong><%= user.renewalDate %></strong></p>
        <div class="mt-4 space-x-2">
          <a href="/subscription/upgrade" class="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600">Upgrade Plan</a>
          <a href="/subscription/cancel" class="bg-gray-300 text-gray-800 py-2 px-4 rounded hover:bg-gray-400">Cancel Plan</a>
        </div>
      </div>

      <!-- Usage Stats -->
      <div class="bg-white shadow-lg rounded-lg p-6">
        <h3 class="text-lg font-semibold mb-4">Usage Stats</h3>
        <p>Total Uploads: <strong><%= user.totalUploads %></strong></p>
        <p>Total Conversions: <strong><%= user.totalConversions %></strong></p>
        <p>Remaining Quota: <strong><%= user.remainingQuota %></strong></p>
        <p>Storage Used: <strong><%= user.storageUsed %> / <%= user.storageLimit %></strong></p>
      </div>

      <!-- Security -->
      <div class="bg-white shadow-lg rounded-lg p-6">
        <h3 class="text-lg font-semibold mb-4">Security</h3>
        <p>Two-Factor Authentication: <strong><%= user.twoFactor ? 'Enabled' : 'Disabled' %></strong></p>
        <p>Last Login: <strong><%= user.lastLogin %></strong></p>
        <a href="/profile/login-history" class="mt-4 inline-block bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600">View Login History</a>
      </div>

      <!-- Personalization -->
      <div class="bg-white shadow-lg rounded-lg p-6">
        <h3 class="text-lg font-semibold mb-4">Personalization</h3>
        <div class="flex items-center justify-between mb-2">
          <span>Dark Mode</span>
          <input type="checkbox" class="toggle-checkbox" <%= user.darkMode ? 'checked' : '' %>>
        </div>
        <div class="flex items-center justify-between mb-2">
          <span>Preferred Output Style</span>
          <select class="border rounded px-2 py-1">
            <option <%= user.outputStyle === 'Cartoon' ? 'selected' : '' %>>Cartoon</option>
            <option <%= user.outputStyle === 'Anime' ? 'selected' : '' %>>Anime</option>
            <option <%= user.outputStyle === 'Sketch' ? 'selected' : '' %>>Sketch</option>
          </select>
        </div>
        <div class="flex items-center justify-between">
          <span>Language Preference</span>
          <select class="border rounded px-2 py-1">
            <option <%= user.language === 'English' ? 'selected' : '' %>>English</option>
            <option <%= user.language === 'Hindi' ? 'selected' : '' %>>Hindi</option>
            <option <%= user.language === 'Spanish' ? 'selected' : '' %>>Spanish</option>
          </select>
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="bg-white shadow-lg rounded-lg p-6">
        <h3 class="text-lg font-semibold mb-4">Recent Activity</h3>
        
      </div>
    </div>
  </div>
</div>
